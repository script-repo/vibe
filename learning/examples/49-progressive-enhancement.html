<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progressive Enhancement Pattern</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            padding: 40px 20px;
        }
        .container { max-width: 800px; margin: 0 auto; }
        h1 { color: #333; margin-bottom: 30px; text-align: center; }

        .notice {
            background: #fef3c7;
            color: #92400e;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
            text-align: center;
        }

        .section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        h2 { color: #667eea; margin-bottom: 20px; }

        /* CSS-only accordion using checkbox hack */
        .accordion {
            margin: 15px 0;
        }

        .accordion input[type="checkbox"] {
            position: absolute;
            opacity: 0;
        }

        .accordion-label {
            display: block;
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            user-select: none;
            transition: background 0.3s;
        }

        .accordion-label:hover {
            background: #f3f4f6;
        }

        .accordion-label::after {
            content: '▼';
            float: right;
            transition: transform 0.3s;
        }

        .accordion input[type="checkbox"]:checked + .accordion-label::after {
            transform: rotate(-180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .accordion input[type="checkbox"]:checked ~ .accordion-content {
            max-height: 500px;
        }

        .accordion-content-inner {
            padding: 15px;
        }

        /* CSS-only tabs */
        .tabs {
            margin: 20px 0;
        }

        .tabs input[type="radio"] {
            position: absolute;
            opacity: 0;
        }

        .tab-labels {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .tab-label {
            padding: 12px 24px;
            background: #f9fafb;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            user-select: none;
            transition: all 0.3s;
        }

        .tab-label:hover {
            background: #f3f4f6;
        }

        .tabs input[type="radio"]:checked + .tab-label {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
            padding: 20px;
            background: #f9fafb;
            border-radius: 0 8px 8px 8px;
        }

        .tabs input[type="radio"]:checked ~ .tab-contents .tab-content[data-tab="1"] { display: none; }
        .tabs input[type="radio"]:checked ~ .tab-contents .tab-content[data-tab="2"] { display: none; }
        .tabs input[type="radio"]:checked ~ .tab-contents .tab-content[data-tab="3"] { display: none; }

        #tab1:checked ~ .tab-contents .tab-content[data-tab="1"] { display: block; }
        #tab2:checked ~ .tab-contents .tab-content[data-tab="2"] { display: block; }
        #tab3:checked ~ .tab-contents .tab-content[data-tab="3"] { display: block; }

        /* Enhanced features (with JavaScript) */
        .js-enhanced {
            border-left: 4px solid #4ade80;
        }

        .feature-badge {
            display: inline-block;
            background: #4ade80;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }

        code {
            background: #1e293b;
            color: #e2e8f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Progressive Enhancement Pattern</h1>

        <div class="notice" id="jsNotice">
            JavaScript is disabled. The app works with CSS-only components!
        </div>

        <div class="section">
            <h2>CSS-Only Accordion</h2>
            <p>Works without JavaScript using the <code>:checked</code> pseudo-class</p>

            <div class="accordion">
                <input type="checkbox" id="acc1">
                <label class="accordion-label" for="acc1">
                    What is Progressive Enhancement?
                </label>
                <div class="accordion-content">
                    <div class="accordion-content-inner">
                        Progressive Enhancement is a strategy that emphasizes web content first,
                        allowing everyone to access the basic content and functionality of a web page.
                    </div>
                </div>
            </div>

            <div class="accordion">
                <input type="checkbox" id="acc2">
                <label class="accordion-label" for="acc2">
                    How does it work?
                </label>
                <div class="accordion-content">
                    <div class="accordion-content-inner">
                        Start with semantic HTML, add CSS for presentation, then enhance with JavaScript
                        for advanced features. If JavaScript fails, the core functionality still works.
                    </div>
                </div>
            </div>

            <div class="accordion">
                <input type="checkbox" id="acc3">
                <label class="accordion-label" for="acc3">
                    Why use it?
                </label>
                <div class="accordion-content">
                    <div class="accordion-content-inner">
                        Ensures maximum compatibility, improves accessibility, and provides a better
                        user experience even when JavaScript is disabled or fails to load.
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>CSS-Only Tabs</h2>
            <p>Implemented using radio buttons and <code>:checked</code> selector</p>

            <div class="tabs">
                <input type="radio" id="tab1" name="tabs" checked>
                <label class="tab-label" for="tab1">HTML</label>

                <input type="radio" id="tab2" name="tabs">
                <label class="tab-label" for="tab2">CSS</label>

                <input type="radio" id="tab3" name="tabs">
                <label class="tab-label" for="tab3">JavaScript</label>

                <div class="tab-contents">
                    <div class="tab-content" data-tab="1">
                        <h3>HTML Layer</h3>
                        <p>Semantic markup provides the foundation. Content is accessible to everyone,
                        regardless of browser capabilities.</p>
                        <ul>
                            <li>Semantic elements</li>
                            <li>Proper heading hierarchy</li>
                            <li>Accessible forms</li>
                        </ul>
                    </div>

                    <div class="tab-content" data-tab="2">
                        <h3>CSS Layer</h3>
                        <p>Styling enhances the presentation without affecting functionality.
                        Uses modern CSS features like Grid, Flexbox, and custom properties.</p>
                        <ul>
                            <li>Responsive design</li>
                            <li>CSS-only interactions</li>
                            <li>Graceful degradation</li>
                        </ul>
                    </div>

                    <div class="tab-content" data-tab="3">
                        <h3>JavaScript Layer</h3>
                        <p>Adds enhanced interactivity and features. Should be considered an enhancement,
                        not a requirement for core functionality.</p>
                        <ul>
                            <li>ARIA attributes</li>
                            <li>Keyboard navigation</li>
                            <li>Advanced features</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="section" id="jsFeatures">
            <h2>JavaScript Enhancements</h2>
            <p>These features are added when JavaScript is available:</p>
            <ul id="enhancementsList">
                <li>Feature detection</li>
                <li>ARIA attributes for accessibility</li>
                <li>Keyboard navigation support</li>
                <li>Analytics and tracking</li>
                <li>Client-side validation</li>
            </ul>
        </div>
    </div>

    <script>
        // Progressive enhancement: Add features when JavaScript is available
        (function() {
            // Update notice
            const notice = document.getElementById('jsNotice');
            notice.textContent = 'JavaScript is enabled! Enhanced features are active.';
            notice.style.background = '#d1fae5';
            notice.style.color = '#065f46';

            // Add visual indicators for JS-enhanced sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('js-enhanced');
            });

            // Add feature badges
            document.querySelectorAll('h2').forEach(heading => {
                const badge = document.createElement('span');
                badge.className = 'feature-badge';
                badge.textContent = 'Enhanced';
                heading.appendChild(badge);
            });

            // Add ARIA attributes to accordions
            document.querySelectorAll('.accordion').forEach(accordion => {
                const checkbox = accordion.querySelector('input[type="checkbox"]');
                const label = accordion.querySelector('.accordion-label');
                const content = accordion.querySelector('.accordion-content');

                label.setAttribute('role', 'button');
                label.setAttribute('aria-expanded', checkbox.checked);
                content.setAttribute('role', 'region');

                checkbox.addEventListener('change', () => {
                    label.setAttribute('aria-expanded', checkbox.checked);
                });
            });

            // Add ARIA attributes to tabs
            const tabInputs = document.querySelectorAll('.tabs input[type="radio"]');
            const tabLabels = document.querySelectorAll('.tab-label');
            const tabContents = document.querySelectorAll('.tab-content');

            tabLabels.forEach((label, index) => {
                label.setAttribute('role', 'tab');
                label.setAttribute('aria-selected', tabInputs[index].checked);
            });

            tabContents.forEach(content => {
                content.setAttribute('role', 'tabpanel');
            });

            tabInputs.forEach((input, index) => {
                input.addEventListener('change', () => {
                    tabLabels.forEach((label, i) => {
                        label.setAttribute('aria-selected', i === index);
                    });
                });
            });

            // Add keyboard navigation for accordions
            document.querySelectorAll('.accordion-label').forEach(label => {
                label.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        label.click();
                    }
                });

                label.setAttribute('tabindex', '0');
            });

            // Add keyboard navigation for tabs
            tabLabels.forEach((label, index) => {
                label.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowRight') {
                        e.preventDefault();
                        const next = tabLabels[(index + 1) % tabLabels.length];
                        next.click();
                        next.focus();
                    } else if (e.key === 'ArrowLeft') {
                        e.preventDefault();
                        const prev = tabLabels[(index - 1 + tabLabels.length) % tabLabels.length];
                        prev.click();
                        prev.focus();
                    } else if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        label.click();
                    }
                });

                label.setAttribute('tabindex', index === 0 ? '0' : '-1');
            });

            // Log feature detection
            console.log('Progressive Enhancement Features:');
            console.log('- JavaScript: ✓ Enabled');
            console.log('- ARIA: ✓ Added');
            console.log('- Keyboard Navigation: ✓ Enhanced');
            console.log('- Feature Detection: ✓ Active');

            // Add analytics simulation
            console.log('Analytics: Page view tracked');

            // Update enhancements list
            const enhancementsList = document.getElementById('enhancementsList');
            enhancementsList.innerHTML = `
                <li>✓ Feature detection active</li>
                <li>✓ ARIA attributes added for screen readers</li>
                <li>✓ Keyboard navigation enabled (Arrow keys, Enter, Space)</li>
                <li>✓ Analytics tracking active</li>
                <li>✓ Client-side enhancements loaded</li>
            `;
        })();
    </script>
</body>
</html>
